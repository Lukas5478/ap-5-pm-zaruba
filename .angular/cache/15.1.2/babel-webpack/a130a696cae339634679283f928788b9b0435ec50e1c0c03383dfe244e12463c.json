{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { ReplaySubject } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../storage/storage.service\";\nexport class LinkService {\n  constructor(storageService) {\n    this.storageService = storageService;\n    this.linkDetail = {\n      category: 'programming',\n      blacklistFlag: ['nsfw'],\n      type: 'single'\n    };\n    this.privateLinks = [{\n      category: \"Programming\",\n      blacklistFlag: [\"nsfw\"],\n      type: \"single\"\n    }];\n    this.privateLinksSubject = new ReplaySubject(1);\n    this.link1 = {\n      category: \"\",\n      blacklistFlag: [],\n      type: \"\"\n    };\n    this._links$ = [];\n    this.storageService.getData('links').then(links => {\n      if (!links) {\n        links = this.privateLinks;\n      }\n      this.privateLinksSubject.next(links);\n    });\n    this.links$.subscribe(links => {\n      this._links$ = links;\n    });\n  }\n  get links$() {\n    return this.privateLinksSubject.asObservable();\n  }\n  saveLinks(category, blacklistFlag, type) {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.link1 = {\n        category: category,\n        blacklistFlag: blacklistFlag,\n        type: type\n      };\n      this._links$.push(this.link1);\n      yield this.storageService.saveData('links', this._links$);\n      this.privateLinksSubject.next(this._links$);\n    });\n  }\n  removeLink() {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.storageService.removeItem('links');\n    });\n  }\n}\nLinkService.ɵfac = function LinkService_Factory(t) {\n  return new (t || LinkService)(i0.ɵɵinject(i1.StorageService));\n};\nLinkService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: LinkService,\n  factory: LinkService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AACA,SAAwBA,aAAa,QAAO,MAAM;;;AAalD,OAAM,MAAOC,WAAW;EAkBtBC,YACUC,cAA8B;IAA9B,mBAAc,GAAdA,cAAc;IAjBxB,eAAU,GAAS;MACjBC,QAAQ,EAAE,aAAa;MACvBC,aAAa,EAAE,CAAC,MAAM,CAAC;MACvBC,IAAI,EAAE;KACP;IAEO,iBAAY,GAAW,CAAC;MAC9BF,QAAQ,EAAE,aAAa;MACvBC,aAAa,EAAE,CAAC,MAAM,CAAC;MACvBC,IAAI,EAAE;KACP,CAAC;IAEM,wBAAmB,GAAG,IAAIN,aAAa,CAAS,CAAC,CAAC;IAE1D,UAAK,GAAO;MAACI,QAAQ,EAAE,EAAE;MAAEC,aAAa,EAAE,EAAE;MAACC,IAAI,EAAE;IAAE,CAAC;IACtD,YAAO,GAAW,EAAE;IAKlB,IAAI,CAACH,cAAc,CAACI,OAAO,CAAC,OAAO,CAAC,CAACC,IAAI,CAACC,KAAK,IAAG;MAChD,IAAI,CAACA,KAAK,EAAE;QACVA,KAAK,GAAG,IAAI,CAACC,YAAY;;MAE3B,IAAI,CAACC,mBAAmB,CAACC,IAAI,CAACH,KAAK,CAAC;IACtC,CAAC,CAAC;IACF,IAAI,CAACI,MAAM,CAACC,SAAS,CAACL,KAAK,IAAG;MAC5B,IAAI,CAACM,OAAO,GAAGN,KAAK;IACtB,CAAC,CAAC;EACJ;EAEA,IAAII,MAAM;IACR,OAAO,IAAI,CAACF,mBAAmB,CAACK,YAAY,EAAE;EAChD;EAEMC,SAAS,CAACb,QAAgB,EAAEC,aAAuB,EAAEC,IAAW;;MAGpE,IAAI,CAACY,KAAK,GAAG;QAACd,QAAQ,EAAEA,QAAQ;QAAEC,aAAa,EAACA,aAAa;QAACC,IAAI,EAAEA;MAAI,CAAC;MACzE,IAAI,CAACS,OAAO,CAACI,IAAI,CAAC,IAAI,CAACD,KAAK,CAAC;MAC7B,MAAM,IAAI,CAACf,cAAc,CAACiB,QAAQ,CAAC,OAAO,EAAE,IAAI,CAACL,OAAO,CAAC;MACzD,IAAI,CAACJ,mBAAmB,CAACC,IAAI,CAAC,IAAI,CAACG,OAAO,CAAC;IAC7C,CAAC;;EACKM,UAAU;;MACd,MAAM,IAAI,CAAClB,cAAc,CAACmB,UAAU,CAAC,OAAO,CAAC;IAC/C,CAAC;;;;mBA/CUrB,WAAW;AAAA;;SAAXA,WAAW;EAAAsB,SAAXtB,WAAW;EAAAuB,YAFV;AAAM","names":["ReplaySubject","LinkService","constructor","storageService","category","blacklistFlag","type","getData","then","links","privateLinks","privateLinksSubject","next","links$","subscribe","_links$","asObservable","saveLinks","link1","push","saveData","removeLink","removeItem","factory","providedIn"],"sourceRoot":"","sources":["D:\\ap-5-pm-zaruba\\src\\app\\services\\link\\link.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {Observable, of, ReplaySubject} from \"rxjs\";\nimport {StorageService} from \"../storage/storage.service\";\n\nexport interface Link {\n  category: string;\n  blacklistFlag: string[];\n  type: string;\n\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LinkService {\n\n  linkDetail: Link = {\n    category: 'programming',\n    blacklistFlag: ['nsfw'],\n    type: 'single'\n  }\n\n  private privateLinks: Link[] = [{\n    category: \"Programming\",\n    blacklistFlag: [\"nsfw\"],\n    type: \"single\"\n  }];\n\n  private privateLinksSubject = new ReplaySubject<Link[]>(1);\n\n  link1: Link={category: \"\", blacklistFlag: [],type: \"\"}\n  _links$: Link[] = [];\n  constructor(\n    private storageService: StorageService\n  ) {\n\n    this.storageService.getData('links').then(links => {\n      if (!links) {\n        links = this.privateLinks;\n      }\n      this.privateLinksSubject.next(links);\n    })\n    this.links$.subscribe(links => {\n      this._links$ = links;\n    })\n  }\n\n  get links$() {\n    return this.privateLinksSubject.asObservable();\n  }\n\n  async saveLinks(category: string, blacklistFlag: string[], type:string){\n\n\n    this.link1 = {category: category, blacklistFlag:blacklistFlag,type: type}\n    this._links$.push(this.link1);\n    await this.storageService.saveData('links', this._links$);\n    this.privateLinksSubject.next(this._links$);\n  }\n  async removeLink(){\n    await this.storageService.removeItem('links');\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}